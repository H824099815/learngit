<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"> 
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
		<title>广告投放</title>
		<link rel="stylesheet" href="../../css/reset.css">
		<link rel="stylesheet" href="../../layui/css/layui.css">
		<link rel="stylesheet" href="../../css/public.css">
		<link rel="stylesheet" href="../../font-awesome-4.7.0/css/font-awesome.css">
		<style>
			body {
				box-sizing: border-box;
				/* overflow: auto; */
				/* font-size: 0; */
			}
		</style>
	</head>
	<body>
	<!-- *@author 侯成昊
		*@company 豆趣（山东）科技有限公司
		*@E-mail 824099815@qq.com
		*@QQ 824099815
	-->
	
		<table id="target" lay-filter="test"></table>
		
		
		
		<script src="../../js/jQuery-3.4.0.js"></script>
		<script src="../../js/jquery.cookie.js"></script>
		<script src="../../layui/layui.js"></script>
		<script type="text/html" id="adImg">
			<img src="{{d.photo}}" style="max-width: 100px; max-height: 100px;">
		</script>
		<script type="text/html" id="licenseImg">
			<img src="{{d.license}}" style="max-width: 100px; max-height: 100px;">
		</script>
		<script type="text/html" id="backBtn">
			<a class="layui-btn layui-btn-xs layui-bg-red" lay-event="reject">驳回</a>
			<a class="layui-btn layui-btn-xs " lay-event="pass">通过</a>
		</script>
		<script>
			layui.use(['element', 'laypage', 'layer', 'form', 'laydate', 'table', 'upload'], function() {
				var $ = layui.jquery,
					element = layui.element,
					laypage = layui.laypage,
					form = layui.form,
					layer = layui.layer,
					table = layui.table,
					upload = layui.upload;

				
				//渲染表格
				table.render({
					elem: '#target',
					page: true,
					height: 'full-22',
					url: '../../json/putInAdLog.json',
					request: {
						pageName: 'pageNum' //页码的参数名称，默认：page
							,
						limitName: 'pageSize' //每页数据量的参数名，默认：limit
					}
				
						,
					cols: [
						[{
								field: 'photo',
								title: '缩略图',
								// fixed: 'left',
								templet:'#adImg',
								align: 'center',
								minWidth: 130
							} , {
								field: 'url',
								title: '广告链接',
								align: 'center',
								minWidth: 100
							}, {
								field: 'type',
								title: '广告类型',
								align: 'center',
								minWidth: 100
							}, {
								field: 'license',
								title: '营业执照',
								templet:'#licenseImg',
								align: 'center',
								minWidth: 130
							}, {
								field: 'static',
								title: '状态',
								align: 'center',
								minWidth: 100
							},{
								field: 'submitTime',
								title: '提交时间',
								align: 'center',
								minWidth: 100
							},{
								field: 'startTime',
								title: '开始时间',
								align: 'center',
								minWidth: 100
							}
							,{
								field: 'endTime',
								title: '结束时间',
								align: 'center',
								minWidth: 100
							} 
							
							
						],
					],
					done: function(res,curr,count) {//表格渲染完成回调 调整高度
						$(".layui-table-cell").css({
							"height": "auto"
						});
						//解决行高撑开后fiexd高度不一致
						table.timer = table.timer || {};
								var tableElem = this.elem.next('.layui-table-view');
								var tableId = tableElem.attr('lay-id');
								table.timer[tableId] && clearInterval(table.timer[tableId]);
						
								table.timer[tableId] = setInterval(function () {
								  layui.each(tableElem.find('.layui-table-main').find('tbody tr'), function (index, trElem) {
									trElem = $(trElem);
									var trFixed = tableElem.find('.layui-table-fixed').find('tr[data-index="' + trElem.data('index') + '"]');
									if (trFixed.height() !== trElem.height()) {
									  setTimeout(function () {
										trFixed.css('height', trElem.height() + 'px');
									  }, 0);
									}
								  });
								}, 5);
						
					}
				});

				





			});
		</script>
	</body>
</html>
