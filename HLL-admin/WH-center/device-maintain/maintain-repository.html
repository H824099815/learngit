<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"> 
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
		<title>维修知识库</title>
		<link rel="stylesheet" href="../../css/reset.css">
		<link rel="stylesheet" href="../../layui/css/layui.css">
		<link rel="stylesheet" href="../../css/public.css">
		<link rel="stylesheet" href="../../font-awesome-4.7.0/css/font-awesome.css">
		<style>
			body {
				box-sizing: border-box;
				/* overflow: auto; */
				/* font-size: 0; */
			}
			.add-plan {
				margin: 10px 0 0 10px;
			}
			
			.layui-layer-content {
				box-sizing: border-box;
				padding: 10px;
			}
			
		</style>
	</head>
	<body>
	<!-- *@author 侯成昊
		*@company 豆趣（山东）科技有限公司
		*@E-mail 824099815@qq.com
		*@QQ 824099815
	-->
	
		<button class="layui-btn layui-right add-plan">新增计划</button>
		<table id="target" lay-filter="target"></table>
		
		
		
		<script src="../../js/jQuery-3.4.0.js"></script>
		<script src="../../js/jquery.cookie.js"></script>
		<script src="../../layui/layui.js"></script>
		<script type="text/html" id="backBtn">
			<a class="layui-btn layui-btn-xs layui-bg-red" lay-event="delete">删除</a>
			<a class="layui-btn layui-btn-xs " lay-event="edit">编辑</a>
			<a class="layui-btn layui-btn-xs " lay-event="solution">解决方案</a>
		</script>
		<script>
			layui.config({
				base: '../../mods/'
				, version: '1.0'
			});
			
			layui.use(['element', 'laypage', 'layer', 'form', 'laydate', 'table', 'upload','layarea'], function() {
				var $ = layui.jquery,
					element = layui.element,
					laypage = layui.laypage,
					form = layui.form,
					layer = layui.layer,
					table = layui.table,
					upload = layui.upload,
					layarea = layui.layarea,
					laydate = layui.laydate;

				
				//渲染表格
				table.render({
					elem: '#target',
					page: true,
					height: 'full-70',
					url: '../../json/maintainRepository.json',
					request: {
						pageName: 'pageNum' //页码的参数名称，默认：page
						,limitName: 'pageSize' //每页数据量的参数名，默认：limit
					},
					cols: [
						[{
								field: 'deviceType',
								title: '设备类型',
								align: 'center',
								minWidth: 100
							},{
								field: 'partName',
								title: '部件名称',
								align: 'center',
								minWidth: 100
							}, {
								field: 'faultDescribed',
								title: '故障描述',
								align: 'center',
								minWidth: 100
							}, {
								field: 'submitter',
								title: '提交人',
								align: 'center',
								minWidth: 100
							},{
								field: 'submitTime',
								title: '提交时间',
								align: 'center',
								minWidth: 100
							},{
								align: 'center',
								title: '操作',
								toolbar: '#backBtn',
								fixed: 'right',
								minWidth: 130
							}
						],
					]
					
				});
				// 监听表格事件
				table.on('tool(target)', function(obj){
					var data = obj.data;
					if(obj.event === 'edit') {
						layer.open({
							type: 1,
							area: ['60%', '80%'], //宽高
							content: '<form class="layui-form"><div class="layui-form-item"><label class="layui-form-label">设备类型</label><div class="layui-input-block"><input type="text" class="layui-input" id="startTime" placeholder="请输入设备类型"></div></div><div class="layui-form-item"><label class="layui-form-label">部件名称</label><div class="layui-input-block"><input type="text" class="layui-input" id="startTime" placeholder="请输入部件名称"></div></div><div class="layui-form-item layui-form-text"><label class="layui-form-label">故障描述</label><div class="layui-input-block"><textarea placeholder="请输入故障描述" class="layui-textarea" style="resize: none;"></textarea></div></div><div class="layui-form-item layui-form-text"><label class="layui-form-label">解决方案</label><div class="layui-input-block"><textarea placeholder="请输入解决方案" class="layui-textarea" style="resize: none;"></textarea></div></div><div class="layui-form-item"><div class="layui-input-block"><button type="submit" class="layui-btn" lay-submit="" lay-filter="submit">立即提交</button><button type="reset" class="layui-btn layui-btn-primary">重置</button></div></div></form>'
						});
						form.render();
						layarea.render({
							elem: '#area-picker',
							change: function (res) {
								//选择结果
								console.log(res);
						    }
						});
						laydate.render({
							elem: '#startTime'
						});
						laydate.render({
							elem: '#endTime'
						});
					} else {
						if(obj.event === "solution") {
							layer.open({
								type: 1,
								area: ['60%', '80%'], //宽高
								content: '解决方案'
							});
						}
					}
				});
			$('.add-plan').click(function() {
				//页面层
				
				layer.open({
					type: 1,
					area: ['60%', '80%'], //宽高
					content: '<form class="layui-form"><div class="layui-form-item"><label class="layui-form-label">设备类型</label><div class="layui-input-block"><input type="text" class="layui-input" id="startTime" placeholder="请输入设备类型"></div></div><div class="layui-form-item"><label class="layui-form-label">部件名称</label><div class="layui-input-block"><input type="text" class="layui-input" id="startTime" placeholder="请输入部件名称"></div></div><div class="layui-form-item layui-form-text"><label class="layui-form-label">故障描述</label><div class="layui-input-block"><textarea placeholder="请输入故障描述" class="layui-textarea" style="resize: none;"></textarea></div></div><div class="layui-form-item layui-form-text"><label class="layui-form-label">解决方案</label><div class="layui-input-block"><textarea placeholder="请输入解决方案" class="layui-textarea" style="resize: none;"></textarea></div></div><div class="layui-form-item"><div class="layui-input-block"><button type="submit" class="layui-btn" lay-submit="" lay-filter="submit">立即提交</button><button type="reset" class="layui-btn layui-btn-primary">重置</button></div></div></form>'
				});
				form.render();
				layarea.render({
					elem: '#area-picker',
					change: function (res) {
						//选择结果
						console.log(res);
				    }
				});
				laydate.render({
					elem: '#startTime'
				});
				laydate.render({
					elem: '#endTime'
				});
			})





			});
		</script>
	</body>
</html>
